(function(S,i){window.s_math_F_1=1<<GLLibConfig.math_fixedPointBase;window.s_math_F_05=(s_math_F_1>>1);var P=null;var h=0;var g=0;window.s_Math_intersectX=0;window.s_Math_intersectY=0;window.MATH_SEGMENTINTERSECT_DONT_INTERSECT=0;var v=-1;window.MATH_SEGMENTINTERSECT_DO_INTERSECT=1;var j=0;var e=0;var M=null;var W=null;var F=0;window.s_math_bezierY=0;var D=0;var y=null;var Y=null;var Q=null;window.Math_AngleMUL=1<<GLLibConfig.math_angleFixedPointBase;window.Math_Angle90=C(90);window.Math_Angle180=C(180);window.Math_Angle270=C(270);window.Math_Angle360=C(360);var l=0;var ad=1;var k=2;var aa=3;var w=1686629713>>(29-GLLibConfig.math_fixedPointBase);var r=1459366444>>(29-GLLibConfig.math_fixedPointBase);var L=R(180<<GLLibConfig.math_fixedPointBase,w);var T=R(1<<GLLibConfig.math_angleFixedPointBase,360);var af=0;var H=(1<<1);var K=(1<<2);var p=LowAPI.Gen_Array([2,2],0);function b(aj,ai,ah){if(!(aj!=null)){Assert(false,"Math_Init.packName is null")}var ag;Pack_Open(aj);if(ai>=0){y=Pack_ReadArray(ai)}else{y=null}if(ah>=0){Y=Pack_ReadArray(ah)}else{Y=null}Pack_Close()}function G(ag){if(GLLibConfig.math_fixedPointBase>GLLibConfig.math_angleFixedPointBase){return ag<<(GLLibConfig.math_fixedPointBase-GLLibConfig.math_angleFixedPointBase)}else{if(GLLibConfig.math_fixedPointBase<GLLibConfig.math_angleFixedPointBase){return ag>>(GLLibConfig.math_angleFixedPointBase-GLLibConfig.math_fixedPointBase)}else{return ag}}}function m(ag){return ag<<GLLibConfig.math_fixedPointBase}function o(ag){return((ag+(1<<(GLLibConfig.math_fixedPointBase-1)))>>GLLibConfig.math_fixedPointBase)}function z(ag){if(!(ag>=0)){Assert(false,"Math_Log2.value is negative")}var ah=0;while((ag>>ah)>1){ah++}return ah}function s(ah,ag){return((ah^ag)>=0)}function f(ag,al,ah){var ak=(ag*ag+al*al);var ai=1;for(var aj=0;aj<ah;aj++){ai=LowAPI.Float2Int((ai+ak/ai))>>1}return ai}function B(ag){if(P==null){P=new Random(ag)}else{P.setSeed(ag)}}function V(){if(arguments){switch(arguments.length){case 0:return A.apply(this,arguments);case 2:return x.apply(this,arguments)}}throw new Error("InvalidArguments")}function x(ah,ag){if(!(P!=null)){Assert(false,"Math_Rand.GLLib mut be initialised prior to using this function")}if(!(ah<=ag)){Assert(false,"Math_Rand.a must be <= b")}var ai;if(ag!=ah){ai=P.nextInt();if(ai<0){ai*=-1}return(ah+(ai%(ag-ah)))}return ag}function A(){if(!(P!=null)){Assert(false,"Math_Rand.GLLib mut be initialised prior to using this function")}return P.nextInt()}function C(ag){return LowAPI.Float2Int(ag*Math_AngleMUL/360)}function ae(ag){return((ag*360)>>GLLibConfig.math_angleFixedPointBase)}function E(ag){if(!(y!=null)){Assert(false,"!!ERROR!! Math_Sin.s_math_cosTable is null, call Math_Init first")}return u(Math_Angle90-ag)}function u(ag){if(!(y!=null)){Assert(false,"!!ERROR!! Math_Cos.s_math_cosTable is null, call Math_Init first")}if(ag<0){ag*=-1}ag&=(Math_Angle360-1);if(ag<=Math_Angle90){return y[ag]}else{if(ag<Math_Angle180){ag=Math_Angle180-ag;return -y[ag]}else{if(ag<=Math_Angle270){ag=ag-Math_Angle180;return -y[ag]}else{ag=Math_Angle360-ag;return y[ag]}}}}function d(ah){if(!(y!=null)){Assert(false,"!!ERROR!! Math_Tan.s_math_cosTable is null, call Math_Init first")}var ag=u(ah);if(ag==0){return(2147483647).castToInt()}return LowAPI.Float2Int(m(E(ah))/ag)}function q(ai,ah,ag){if(typeof ag!="undefined"){return a(ai,ah,ag)}else{if(typeof ah!="undefined"){return c(ai,ah)}else{throw new Error("Invalid parameters")}}}function a(ai,ag,aj){var ah=(ai+ag)>>1;while((ai+1)<ag){ah=(ai+ag)>>1;if(aj>d(ah)){ai=ah}else{ag=ah}}if(aj>=d(ag)){return ag}else{return ai}}function c(ah,ag){if(ah>0){if(ag>0){return q(0,Math_Angle90,LowAPI.Float2Int((ag*s_math_F_1)/ah))}else{if(ag==0){return 0}else{return q(Math_Angle270,Math_Angle360,LowAPI.Float2Int((ag*s_math_F_1)/ah))}}}else{if(ah==0){if(ag>0){return Math_Angle90}else{if(ag==0){return 0}else{return Math_Angle270}}}else{if(ag>0){return q(Math_Angle90,Math_Angle180,LowAPI.Float2Int((ag*s_math_F_1)/ah))}else{if(ag==0){return Math_Angle180}else{return q(Math_Angle180,Math_Angle270,LowAPI.Float2Int((ag*s_math_F_1)/ah))}}}}}function N(ai,ah){if(GLLibConfig.math_AtanUseCacheTable){if(Q==null){Q=[];for(var aj=0;aj<s_math_F_1+1;aj++){Q[aj]=q(s_math_F_1,aj)}}if(ai==0){if(ah>0){return Math_Angle90}else{if(ah==0){return 0}else{return Math_Angle270}}}var ag;if(ai>0){if(ah>=0){if(ai>=ah){ag=LowAPI.Float2Int(ah*s_math_F_1/ai);return Q[ag]}else{ag=LowAPI.Float2Int(ai*s_math_F_1/ah);return Math_Angle90-Q[ag]}}else{ah*=-1;if(ai>=ah){ag=LowAPI.Float2Int(ah*s_math_F_1/ai);return Math_Angle360-Q[ag]}else{ag=LowAPI.Float2Int(ai*s_math_F_1/ah);return Math_Angle270+Q[ag]}}}else{ai*=-1;if(ah>=0){if(ai>=ah){ag=LowAPI.Float2Int(ah*s_math_F_1/ai);return Math_Angle180-Q[ag]}else{ag=LowAPI.Float2Int(ai*s_math_F_1/ah);return Math_Angle90+Q[ag]}}else{ah*=-1;if(ai>=ah){ag=LowAPI.Float2Int(ah*s_math_F_1/ai);return Math_Angle180+Q[ag]}else{ag=LowAPI.Float2Int(ai*s_math_F_1/ah);return Math_Angle270-Q[ag]}}}}else{return q(ai,ah)}}function Z(ag){if(true){Assert(Y!=null,"!!ERROR!! Math_sqrt.s_math_sqrtTable is null, call Math_Init first")}if(ag>=65536){if(ag>=16777216){if(ag>=268435456){if(ag>=1073741824){return(Y[ag>>24]<<8)}else{return(Y[ag>>22]<<7)}}else{if(ag>=67108864){return(Y[ag>>20]<<6)}else{return(Y[ag>>18]<<5)}}}else{if(ag>=1048576){if(ag>=4194304){return(Y[ag>>16]<<4)}else{return(Y[ag>>14]<<3)}}else{if(ag>=262144){return(Y[ag>>12]<<2)}else{return(Y[ag>>10]<<1)}}}}else{if(ag>=256){if(ag>=4096){if(ag>=16384){return(Y[ag>>8])}else{return(Y[ag>>6]>>1)}}else{if(ag>=1024){return(Y[ag>>4]>>2)}else{return(Y[ag>>2]>>3)}}}else{if(ag>=0){return Y[ag]>>4}return 0}}}function t(ay,aj,ax,ai,aw,ah,av,ag){var au,aD,am,at,aC,al;var aq,ak,ar,ao;au=ax-ay;aD=aw-av;if(au<0){aq=ax;ak=ay}else{ak=ax;aq=ay}if(aD>0){if((ak<av)||(aw<aq)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}else{if((ak<aw)||(av<aq)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}at=ai-aj;aC=ah-ag;if(at<0){ar=ai;ao=aj}else{ao=ai;ar=aj}if(aC>0){if((ao<ag)||(ah<ar)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}else{if((ao<ah)||(ag<ar)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}am=ay-aw;al=aj-ah;var aB=(aC*am)-(aD*al);var az=(at*aD)-(au*aC);if(az>0){if((aB<0)||(aB>az)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}else{if((aB>0)||(aB<az)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}var aA=(au*al)-(at*am);if(az>0){if((aA<0)||(aA>az)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}else{if((aA>0)||(aA<az)){return MATH_SEGMENTINTERSECT_DONT_INTERSECT}}if(az==0){return v}var ap,an;ap=aB*au;an=s(ap,az)?(az>>1):(-az>>1);s_Math_intersectX=LowAPI.Float2Int(ay+(ap+an)/az);ap=aB*at;an=s(ap,az)?(az>>1):(-az>>1);s_Math_intersectY=LowAPI.Float2Int(aj+(ap+an)/az);return MATH_SEGMENTINTERSECT_DO_INTERSECT}function I(al,ak,aj,ah,ai,ag){return LowAPI.Float2Int((al*ai+2*ak*ah+aj*ag)/(1<<(GLLibConfig.math_fixedPointBase*2)))}function O(ai,am,ah,al,ag,ak,ao){var ai=LowAPI.Float2Int(ai);var am=LowAPI.Float2Int(am);var ah=LowAPI.Float2Int(ah);var al=LowAPI.Float2Int(al);var ag=LowAPI.Float2Int(ag);var ak=LowAPI.Float2Int(ak);var ao=LowAPI.Float2Int(ao);var ap,aj,an;an=ao*ao;ap=s_math_F_1-ao;aj=ap*ap;ap*=ao;F=I(ai,ah,ag,ap,aj,an);s_math_bezierY=I(am,al,ak,ap,aj,an)}function J(ai,ah){var ag=ai.castToLong()-ah.castToLong();if(!(ag>=Number.MIN_VALUE)){Assert(false,"Math_FixedPoint_Add(): Multiplication Integer Overflow")}return ag.castToInt()}function ac(ah,ai){var ag=((ah.castToLong()*ai.castToLong())+(s_math_F_1>>1))>>GLLibConfig.math_fixedPointBase;if(!(ag<=Number.MAX_VALUE)){Assert(false,"Math_FixedPoint_Multiply(): Multiplication Integer Overflow")}return ag.castToInt()}function R(ag,ah){if(!(ah!=0)){Assert(false,"Math_FixedPoint_Divide(): Division by Zero")}return LowAPI.Float2Int(((ag.castToLong()<<GLLibConfig.math_fixedPointBase<<1)/(ah))+1).castToInt()>>1}function X(ag){return ac(ag,T)}function ab(ag){return Math.abs(ag)}function U(ah,ag){return Math.max(ah,ag)}function n(ah,ag){return Math.min(ah,ag)}LowAPI.extendObject(S,{Math_Init:b,Math_FixedPointAdjust:G,Math_IntToFixedPoint:m,Math_FixedPointToInt:o,Math_Norm:f,Math_RandSetSeed:B,Math_Rand:V,Math_DegreeToFixedPointAngle:C,Math_FixedPointAngleToDegree:ae,Math_FixedPoint_DegreesToAngleFixedPoint:X,Math_Sin:E,Math_Cos:u,Math_Tan:d,Math_Atan:N,Math_Bezier2D:O,Math_FixedPoint_Subtract:J,Math_FixedPoint_Multiply:ac,Math_FixedPoint_Divide:R,Math_Abs:ab,Math_Max:U,Math_Min:n,Math_SameSign:s,Math_Log2:z,Math_SegmentIntersect:t,Math_Sqrt:Z,},true)})(window);